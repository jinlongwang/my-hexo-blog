<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="Simple is better than complex">
<meta property="og:type" content="website">
<meta property="og:title" content="wangjinlong&#39;s blog">
<meta property="og:url" content="http://wangjinlong.vip/page/2/index.html">
<meta property="og:site_name" content="wangjinlong&#39;s blog">
<meta property="og:description" content="Simple is better than complex">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="wangjinlong&#39;s blog">
<meta name="twitter:description" content="Simple is better than complex">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://wangjinlong.vip/page/2/">





  <title>wangjinlong's blog</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">wangjinlong's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wangjinlong.vip/2016/04/09/2016-06-016-django-class-based-view/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jinlong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangjinlong's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/09/2016-06-016-django-class-based-view/" itemprop="url">django class based view 代码分析</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-04-09T00:01:00+08:00">
                2016-04-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="django-class-based-view-代码分析"><a href="#django-class-based-view-代码分析" class="headerlink" title="django class based view 代码分析"></a>django class based view 代码分析</h1><ol>
<li><p>url.py入手</p>
<p> <code>class view</code> url配置一般这样写</p>
<pre><code>url(r&apos;^module_detail/(?P&lt;pk&gt;(\d+))/$&apos; ModuleDetailView.as_view(), name=&apos;module_detail&apos;),
</code></pre><p> 关键方法是<code>as_view()</code>。</p>
</li>
<li><p><code>as_view()</code> 源码</p>
<p> <code>as_view()</code>方法实际是个闭包， 返回了一个处理函数， 把class view 变成了function view， 源码如下：</p>
<pre><code class="python">
<span class="meta">@classonlymethod</span>
<span class="function"><span class="keyword">def</span> <span class="title">as_view</span><span class="params">(cls, **initkwargs)</span>:</span>
    <span class="string">"""</span>
<span class="string">    Main entry point for a request-response process.</span>
<span class="string">    """</span>
    <span class="keyword">for</span> key <span class="keyword">in</span> initkwargs:
        <span class="keyword">if</span> key <span class="keyword">in</span> cls.http_method_names:
            <span class="keyword">raise</span> TypeError(<span class="string">"You tried to pass in the %s method name as a "</span>
                            <span class="string">"keyword argument to %s(). Don't do that."</span>
                            % (key, cls.__name__))
        <span class="keyword">if</span> <span class="keyword">not</span> hasattr(cls, key):
            <span class="keyword">raise</span> TypeError(<span class="string">"%s() received an invalid keyword %r. as_view "</span>
                            <span class="string">"only accepts arguments that are already "</span>
                            <span class="string">"attributes of the class."</span> % (cls.__name__, key))

    <span class="function"><span class="keyword">def</span> <span class="title">view</span><span class="params">(request, *args, **kwargs)</span>:</span>
        self = cls(**initkwargs)
        <span class="keyword">if</span> hasattr(self, <span class="string">'get'</span>) <span class="keyword">and</span> <span class="keyword">not</span> hasattr(self, <span class="string">'head'</span>):
            self.head = self.get
        self.request = request
        self.args = args
        self.kwargs = kwargs
        <span class="keyword">return</span> self.dispatch(request, *args, **kwargs)
    view.view_class = cls
    view.view_initkwargs = initkwargs

    <span class="comment"># take name and docstring from class</span>
    update_wrapper(view, cls, updated=())

    <span class="comment"># and possible attributes set by decorators</span>
    <span class="comment"># like csrf_exempt from dispatch</span>
    update_wrapper(view, cls.dispatch, assigned=())
    <span class="keyword">return</span> view
</code></pre>
<p> 还可以看到， 方法中实际调用了<code>self.dispatch(request, *args, **kwargs)</code></p>
</li>
<li><p><code>self.dispatch</code>做了什么？<br> 直接看<code>dispatch</code>代码</p>
<pre><code>def dispatch(self, request, *args, **kwargs):
# Try to dispatch to the right method; if a method doesn&apos;t exist,
# defer to the error handler. Also defer to the error handler if the
# request method isn&apos;t on the approved list.
if request.method.lower() in self.http_method_names:
    handler = getattr(self, request.method.lower(), self.http_method_not_allowed)
else:
    handler = self.http_method_not_allowed
return handler(request, *args, **kwargs)
</code></pre><p> 通过<code>getattr</code>方法动态调用对应的method， 如<code>get</code>, <code>post</code>等</p>
</li>
<li><p>看一个DetailView的实现方式</p>
<ul>
<li>类图</li>
</ul>
<p><img src="/img/django_class_view.png" alt="image"></p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wangjinlong.vip/2016/04/09/2016-04-09-openfalcon-summary/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jinlong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangjinlong's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/09/2016-04-09-openfalcon-summary/" itemprop="url">open-falcon 技术分享会总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-04-09T00:01:00+08:00">
                2016-04-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="open-falcon-技术分享会总结"><a href="#open-falcon-技术分享会总结" class="headerlink" title="open-falcon 技术分享会总结"></a>open-falcon 技术分享会总结</h1><h2 id="滴滴出行"><a href="#滴滴出行" class="headerlink" title="滴滴出行"></a>滴滴出行</h2><p>滴滴出行主要介绍了<code>open-falcon v0.1.0</code>的新特性，以及未来<code>open-falcon</code>未来的规划</p>
<h3 id="新特性"><a href="#新特性" class="headerlink" title="新特性"></a>新特性</h3><ol>
<li>graph扩容不再丢失数据</li>
<li>自定义dashboard</li>
<li>自定义汇报时间间隔（放到配置中）</li>
<li>支持openTSDB</li>
<li>适配Grafana-一个全球广泛使用的dashboard</li>
<li>集群监控</li>
<li>nodata监控</li>
<li>文档完善</li>
</ol>
<h3 id="规划"><a href="#规划" class="headerlink" title="规划"></a>规划</h3><ol>
<li>前端模块合并（dashboard, portal）</li>
<li>权限控制</li>
<li>API重新整理设计</li>
<li>组合策略告警， tag反选（不等于某一条件时报警）</li>
</ol>
<h2 id="美团-mt-falcon"><a href="#美团-mt-falcon" class="headerlink" title="美团 mt-falcon"></a>美团 <code>mt-falcon</code></h2><p>美团机器2w+， 监控指标5kw+，open-falcon集群100+台服务器</p>
<ul>
<li>动态服务树整合： 机器上有告警接收人， 策略中也有告警接受人，告警时取并集发送</li>
<li>字符串监控（监控日志信息）</li>
<li>Docker监控： 最早为宿主机监控</li>
<li>告警合并： 第一条告警直接发送， 之后的告警通过提取主机组字段合并发送。机器合并，同一metric合并好做。 服务依赖直接的告警合并不好处理</li>
<li>UI重构</li>
<li>服务内嵌： 把汇报代码直接打入Lib包，不用安装agent</li>
<li>告警屏蔽： 可以选择屏蔽主机， 策略。最多2周，2周后恢复。</li>
</ul>
<h3 id="运维、监控的一些思考"><a href="#运维、监控的一些思考" class="headerlink" title="运维、监控的一些思考"></a>运维、监控的一些思考</h3><ul>
<li>一切为了运维友好， 解放生产力</li>
<li>open-falcon本身的日志需要更加完善</li>
<li>监控的路线为： 基础监控–&gt;聚合监控–&gt;智能监控（定位，自愈）。 基础监控尤为重要</li>
</ul>
<h1 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h1><p>Q: open-falcon的自监控如何处理？</p>
<p>A: 生产环境下很少需要运维， 因为设计上无核心down点。 有anti-eye的工具来监控每个模块</p>
<hr>
<p>Q: 与服务树如何对接？</p>
<p>A: 同步机器列表。open-falcon只做监控， 对于资产的对接需要开发完成。具体怎么对接的滴滴和美团都没有太详细说明</p>
<hr>
<p>Q:open-falcon如何去单点</p>
<p>A:美团多机房部署</p>
<hr>
<p>Q:graph历史数据的迁移</p>
<p>A：美团SSD，3T硬盘，定期删除数据</p>
<hr>
<p>Q: zibbix数据如何迁移？</p>
<p>A：数据不迁移。在zabbix和open-falcon共存阶段， 数据同时往两个地方写入</p>
<hr>
<p>Q: 模板的对接问题？</p>
<p>A： 模板还是open-falcon的模板， 权限自己开发</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wangjinlong.vip/2016/01/01/2016-01-01-new-year/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jinlong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangjinlong's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/01/01/2016-01-01-new-year/" itemprop="url">2015</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-01-01T00:01:00+08:00">
                2016-01-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#新年总结</p>
<p>##2015</p>
<ul>
<li>换了工作</li>
<li>交了首付</li>
<li>父母搬了家</li>
<li>还是他妈的没摇上号</li>
</ul>
<p>2015不管好坏都已经过去</p>
<p>##2016</p>
<p>###技术上</p>
<ul>
<li>重新看一遍计算机网络</li>
<li>认真看一遍mysql核心技术</li>
<li>精通salt</li>
<li>用python构建一个类似salt的大型软件原型</li>
<li>去了解其自动化工具</li>
<li>每天坚持1小时看源码</li>
<li>熟悉一种js构建工具</li>
<li>…</li>
</ul>
<p>###生活上</p>
<ul>
<li>春天来了， 开始坚持跑步，保持身材</li>
<li>出境游</li>
<li>开始还贷款</li>
<li>攒钱买车</li>
</ul>
<p>2016来了， 希望一切顺利</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wangjinlong.vip/2015/12/04/2015-12-04-js-module/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jinlong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangjinlong's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/12/04/2015-12-04-js-module/" itemprop="url">JS组件化开发</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-12-04T11:17:00+08:00">
                2015-12-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="JS-组件化开发"><a href="#JS-组件化开发" class="headerlink" title="JS 组件化开发"></a>JS 组件化开发</h1><p>转载一篇写的非常好的组件化开发</p>
<p><a href="http://purplebamboo.github.io/2015/03/16/javascript-component/" target="_blank" rel="noopener">http://purplebamboo.github.io/2015/03/16/javascript-component/</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wangjinlong.vip/2015/11/18/2015-11-18-vagrant/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jinlong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangjinlong's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/11/18/2015-11-18-vagrant/" itemprop="url">通过vagrant构建开发环境</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-11-18T11:17:00+08:00">
                2015-11-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="通过vagrant构建开发环境"><a href="#通过vagrant构建开发环境" class="headerlink" title="通过vagrant构建开发环境"></a>通过vagrant构建开发环境</h1><p>之前学习<code>saltstack</code>时，minion端实在服务器上，没有在自己的本机。使用起来非常不爽，如果想测试两台的情况就傻逼了。同事推荐了<code>vagrant</code><br>马上用了起来，很快就搭建起了个虚拟环境并把salt安装了上去。爽歪歪。</p>
<h2 id="vagrant"><a href="#vagrant" class="headerlink" title="vagrant"></a>vagrant</h2><p>Vagrant 是一款用来构建虚拟开发环境的工具。</p>
<p>我的开始的理解认为和docker类似。但实际用上才知道要比docker重，封装的是VirtualBox的虚拟机。</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ol>
<li>安装VirtualBox</li>
<li>安装 Vagrant</li>
<li>选择下载自己的镜像（我用的是网上找的centos6.4）</li>
<li>添加自己的镜像到     Vagrant</li>
<li>启动 Vagrant</li>
</ol>
<p>简单几步， 一个虚拟环境就搞定了。</p>
<h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><ul>
<li>Vagrantfile的理解（文档还没有细看）</li>
<li>在虚拟环境中，如何连接宿主机? (现在我直接把宿主机局域网ip写入minion，没有问题)</li>
</ul>
<h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p>这样，用自己的mac就完全能模拟<code>saltstack</code>环境</p>
<p>下一步要加快对salt的学习了。一些基本的概念在脑中已经有了理解，需要仔细看文档并实践掌握</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><p><a href="http://segmentfault.com/a/1190000000264347" target="_blank" rel="noopener">使用 Vagrant 打造跨平台开发环境</a></p>
</li>
<li><p><a href="https://docs.vagrantup.com/v2/getting-started/boxes.html" target="_blank" rel="noopener">https://docs.vagrantup.com/v2/getting-started/boxes.html</a></p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wangjinlong.vip/2015/11/13/2015-11-13-salt-2/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jinlong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangjinlong's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/11/13/2015-11-13-salt-2/" itemprop="url">自动化运维工具saltstack[二]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-11-13T07:42:00+08:00">
                2015-11-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="自动化运维工具saltstack-二"><a href="#自动化运维工具saltstack-二" class="headerlink" title="自动化运维工具saltstack[二]"></a>自动化运维工具saltstack[二]</h1><h2 id="基本配置"><a href="#基本配置" class="headerlink" title="基本配置"></a>基本配置</h2><h3 id="建立state树"><a href="#建立state树" class="headerlink" title="建立state树"></a>建立state树</h3><ul>
<li><p>所谓state只是salt的一种概念，用来保存各种配置yaml的文件。</p>
</li>
<li><p>在Salt中启动一个中心state系统，需要首先确保已经建立了Salt文件服务. 编辑master配置文件(file_roots) 取消如下行的注释</p>
<pre><code>file_roots:
      base:
        - /srv/salt
</code></pre></li>
</ul>
<ul>
<li><p>创建/srv/salt文件夹， 在里面创建<code>top.sls</code> 写入</p>
<pre><code>base:
    &apos;*&apos;:
     - webserver
</code></pre></li>
<li><p>在同一位置穿件<code>webserver.sls</code> 写入</p>
<pre><code>redis:
    pkg:
     - installed
</code></pre><p> 这里我们仅仅测试一个简单的安装redis命令</p>
</li>
<li><p>执行 <code>sudo salt &#39;*&#39; state.highstate</code><br>这个命令相当于把配置推到minion上去！</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wangjinlong.vip/2015/11/06/2015-11-06-saltstack-1/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jinlong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangjinlong's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/11/06/2015-11-06-saltstack-1/" itemprop="url">自动化运维工具saltstack[一]</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-11-06T07:42:00+08:00">
                2015-11-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="自动化运维工具saltstack-一"><a href="#自动化运维工具saltstack-一" class="headerlink" title="自动化运维工具saltstack[一]"></a>自动化运维工具saltstack[一]</h1><p>今年的工作已经转向了运维开发， 这是一个全新的领域，也是一个对自己的心得挑战。之前都是东搞西搞，一直也没有专注过某一块东西，总感觉这个下去对自己并不有利。希望通过1-2年时间，在这个运维开发的领域能够沉淀一些自己东西。处理自己工作的时间， 空余时间也要多研究一些之前没有接触过的东西</p>
<h2 id="saltstack简介"><a href="#saltstack简介" class="headerlink" title="saltstack简介"></a>saltstack简介</h2><p><code>saltstack</code>是一个自动化运维工具， <a href="https://docs.saltstack.com" target="_blank" rel="noopener">文档见这里</a>或者见<a href="http://docs.saltstack.cn/zh_CN/latest/topics/installation/index.html#quick-install" target="_blank" rel="noopener">中文文档</a>。</p>
<p>对我来说为什么选择学习<code>saltstack</code>？</p>
<ul>
<li><p><code>saltstack</code>是一个比较先进的自动化运维工具，要比puppet,chef等工具晚出来，觉得以后肯定要比puppet等使用更加广泛。同样的工具还有<code>ansible</code>，如果以后有可能我也要看一下。</p>
</li>
<li><p><code>saltstack</code> 使用python语言编写， 自己本身对python比较熟悉，而且也是从工作以来一直使用的语言。以后研究 salt源码或是拓展第三方模块的时候应该会更顺手</p>
</li>
</ul>
<h2 id="saltstack起步"><a href="#saltstack起步" class="headerlink" title="saltstack起步"></a>saltstack起步</h2><h3 id="环境介绍"><a href="#环境介绍" class="headerlink" title="环境介绍"></a>环境介绍</h3><ul>
<li><p>master使用自己的mac</p>
</li>
<li><p>minion使用一台测试服务器centos</p>
</li>
</ul>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>####master</p>
<p>python， pip这些都很熟悉了，直接就可以安装好。在我mac上安装的时候没有遇到问题，如果有根据报错google一下，应该没什么问题</p>
<pre><code>pip install salt
</code></pre><p>安装完成之后需要在 <code>/etc/salt/</code> 下新建一个 <code>master</code> 文件<br>并把<a href="https://docs.saltstack.com/en/latest/ref/configuration/examples.html#configuration-examples-master" target="_blank" rel="noopener">配置文件</a>copy进来</p>
<p>之后</p>
<pre><code>sudo salt-master --log-level=all
</code></pre><p>成功启动master</p>
<p><img src="/img/salt/start_master.png" alt="image"></p>
<p>####mininon</p>
<p><code>minion</code>在centos上, 使用yum安装， 需要先添加epel源</p>
<pre><code>wget -c http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm
rpm -ivh epel-release-6-8.noarch.rpm
</code></pre><p>然后直接yum安装</p>
<pre><code>yum -y install salt-minion
</code></pre><p>接着在<code>vim /etc/salt/minion</code>编辑配置文件，暂时先打开</p>
<pre><code>master: 10.0.2.2
id: &apos;minion1&apos;
file_client: remote
</code></pre><p>这三项配置。<code>master</code> 指向mac的IP</p>
<pre><code>/etc/init.d/salt-minion start
</code></pre><p>成功启动<code>minion</code></p>
<p><img src="/img/salt/start_minion.png" alt="iamge">    </p>
<p>####授信minion</p>
<pre><code>sudo salt-key -a minion1

sudo salt-key -L
</code></pre><p><img src="/img/salt/trust.png" alt="image"></p>
<p>####测试是否联通</p>
<p>在master上执行</p>
<pre><code>sudo salt &apos;*&apos; test.ping
</code></pre><p>显示</p>
<p><img src="/img/salt/success.png" alt="image"></p>
<p>表示联通</p>
<p>###后记</p>
<p>万里长征第一步， 已经把环境搭好， 然后一点点吃透！</p>
<p>###参考</p>
<p><a href="http://warcraft3.blog.51cto.com/6514883/1362831" target="_blank" rel="noopener">http://warcraft3.blog.51cto.com/6514883/1362831</a></p>
<p><a href="https://docs.saltstack.com/en/latest/topics/tutorials/walkthrough_macosx.html" target="_blank" rel="noopener">https://docs.saltstack.com/en/latest/topics/tutorials/walkthrough_macosx.html</a></p>
<p><a href="https://docs.saltstack.com/en/latest/ref/configuration/examples.html#configuration-examples-master" target="_blank" rel="noopener">https://docs.saltstack.com/en/latest/ref/configuration/examples.html#configuration-examples-master</a></p>
<p><a href="http://rfyiamcool.blog.51cto.com/1030776/1262537" target="_blank" rel="noopener">http://rfyiamcool.blog.51cto.com/1030776/1262537</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wangjinlong.vip/2015/11/03/2015-11-03-web-admin/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jinlong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangjinlong's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/11/03/2015-11-03-web-admin/" itemprop="url">一些管理后台页面</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-11-03T07:42:00+08:00">
                2015-11-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="一些管理后台页面"><a href="#一些管理后台页面" class="headerlink" title="一些管理后台页面"></a>一些管理后台页面</h3><ul>
<li>有赞商城</li>
</ul>
<p><img src="/img/yz1.png" alt="image"></p>
<p><img src="/img/yz2.png" alt="image"></p>
<p><img src="/img/yz3.png" alt="image"></p>
<ul>
<li>孔明社交</li>
</ul>
<p><img src="/img/km1.png" alt="image"></p>
<p><img src="/img/km2.png" alt="image"></p>
<ul>
<li>微信公众平台</li>
</ul>
<p><img src="/img/wx/wx1.png" alt="image"></p>
<p><img src="/img/wx/wx2.png" alt="image"></p>
<p><img src="/img/wx/wx3.png" alt="image"></p>
<p><img src="/img/wx/wx4.png" alt="image"></p>
<p><img src="/img/wx/wx5.png" alt="image"></p>
<p><img src="/img/wx/wx6.png" alt="image"></p>
<p><img src="/img/wx/wx7.png" alt="image"></p>
<p><img src="/img/wx/wx8.png" alt="image"></p>
<p><img src="/img/wx/wx9.png" alt="image"></p>
<p><img src="/img/wx/wx10.png" alt="image"></p>
<p><img src="/img/wx/wx11.png" alt="image"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wangjinlong.vip/2015/08/04/2015-08-04-fenzhi/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jinlong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangjinlong's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/08/04/2015-08-04-fenzhi/" itemprop="url">分治法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-08-04T10:30:00+08:00">
                2015-08-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>昨天做leetcode的一道题，用到了分治法。感觉和快速排序一个<br>意思，把这两个题目放在一起看一下。</p>
<p>只要在了解一下递归的执行逻辑。</p>
<p>Given a string of numbers and operators, return all possible results from computing all the different possible ways to group numbers and operators. The valid operators are +, - and *.</p>
<p>Example 1<br>Input: “2-1-1”.</p>
<p>((2-1)-1) = 0<br>(2-(1-1)) = 2<br>Output: [0, 2]</p>
<p>Example 2<br>Input: “2<em>3-4</em>5”</p>
<p>(2<em>(3-(4</em>5))) = -34<br>((2<em>3)-(4</em>5)) = -14<br>((2<em>(3-4))</em>5) = -10<br>(2<em>((3-4)</em>5)) = -10<br>(((2<em>3)-4)</em>5) = 10<br>Output: [-34, -14, -10, -10, 10]</p>
<p>解法:</p>
<pre><code>class Solution:
# @param {string} input
# @return {integer[]}
def diffWaysToCompute(self, input):
  res = []
  for i,val in enumerate(input):
      if val==&quot;*&quot; or val == &quot;-&quot; or val == &quot;+&quot;:
          left = self.diffWaysToCompute(input[0:i])
          right = self.diffWaysToCompute(input[i+1:])
          for j, jv in enumerate(left):
              for k, kv in enumerate(right):
                  if val == &quot;+&quot;:
                      res.append(jv+kv)
                  if val == &quot;-&quot;:
                      res.append(jv-kv)
                  if val == &quot;*&quot;:
                      res.append(jv*kv)
  if not res:
      res.append(int(input))
  return res
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wangjinlong.vip/2015/07/15/2015-07-15-interview/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jinlong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangjinlong's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/07/15/2015-07-15-interview/" itemprop="url">惨不忍睹</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-07-15T23:04:00+08:00">
                2015-07-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="被虐"><a href="#被虐" class="headerlink" title="被虐"></a>被虐</h1><p>优酷面试，也不算被虐吧，还是表现不够好，基本功不够扎实。<br>算法真特么让人头疼，项目聊得再好也没用。平时的东西研究的不够深入。<br>但是今天的聊天让我知道了：<br>热爱技术就要深入研究，做不了大项目也要往大项目的架构上去考虑，平时还是想的东西太少了。<br>比如工业级的rabbitmq的设计好考虑那些问题等等。算了，再出发吧，我就不信了。</p>
<p>今天遇到的技术问题总结：</p>
<ul>
<li>ip转int</li>
<li>python 修饰器传参数</li>
<li>二叉树任意两点最短路径</li>
<li>按库存比例返回商品</li>
<li>找到K个最小数</li>
</ul>
<p><div id="disqus_thread"></div></p>
<p><script type="text/javascript"><br>    /<em> </em> <em> CONFIGURATION VARIABLES </em> <em> </em>/<br>    var disqus_shortname = ‘jinlongwang’;</p>
<pre><code>/* * * DON&apos;T EDIT BELOW THIS LINE * * */
(function() {
    var dsq = document.createElement(&apos;script&apos;); dsq.type = &apos;text/javascript&apos;; dsq.async = true;
    dsq.src = &apos;//&apos; + disqus_shortname + &apos;.disqus.com/embed.js&apos;;
    (document.getElementsByTagName(&apos;head&apos;)[0] || document.getElementsByTagName(&apos;body&apos;)[0]).appendChild(dsq);
})();
</code></pre><p></script></p>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="noopener" target="_blank">comments powered by Disqus.</a></noscript>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.png" alt="jinlong">
            
              <p class="site-author-name" itemprop="name">jinlong</p>
              <p class="site-description motion-element" itemprop="description">Simple is better than complex</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">30</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">分类</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/jinlongwang" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:superrz@163.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://wangjinlong.vip/" title="Title" target="_blank">Title</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">jinlong</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
